<!DOCTYPE HTML>
<html>
<head>
<title>动态创建表格</title>
<meta charset="utf-8" />
<style>
	table{width:600px; border-collapse:collapse;
		text-align:center;
	}
  td,th{border:1px solid #ccc}
  thead tr td{
    font-weight: bold;
  }
</style>

</head>
<body>
	<div id="data"></div>
  <script>
    var json=[
      {"ename":"Tom", "salary":11000, "age":25},
      {"ename":"John", "salary":13000, "age":28},
      {"ename":"Mary", "salary":12000, "age":25}
    ];
    var table = document.createElement("table");
    var thead = table.createTHead();
    var tr = thead.insertRow();
    for(var key in json[0]){
      tr.insertCell().innerHTML=key;
    }
    tr.insertCell().innerHTML = "op"
    var tbody = table.createTBody();
    for(var emp of json){
      var tr = tbody.insertRow(0);
      for(var key in emp){
        tr.insertCell().innerHTML=emp[key];
      }
      var td = tr.insertCell();
      var btn = document.createElement("button");
      btn.innerHTML = "x";
      btn.onclick = function(){
        var tr = this.parentElement.parentElement;
        var i = tr.rowIndex;
        console.log(i);
        if(confirm(`继续删除${tr.cells[0].innerHTML}`)){
          table.deleteRow(i);
        }
      }
      td.appendChild(btn);
    }

    //将table追加到id为data的div下
    var div=document.getElementById("data");
    div.appendChild(table);
  </script>
</body>
</html>
